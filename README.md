# Video2SOPï¼šå°†ä»ªå™¨æ•™å­¦è§†é¢‘è½¬åŒ–ä¸ºSOP

è¿™ä¸ªé¡¹ç›®æ˜¯ä¸€ä¸ªWeb Appï¼Œå…·æœ‰AIè§†é¢‘ç†è§£èƒ½åŠ›ï¼Œå¯ä»¥å°†å®éªŒå®¤ä»ªå™¨æˆ–å®éªŒæ•™å­¦è§†é¢‘è½¬æ¢ä¸ºæ ‡å‡†æ“ä½œæµç¨‹ï¼ˆstandard operational procedureï¼ŒSOPï¼‰æ–‡æ¡£ã€‚

è¿™ä¸ªé¡¹ç›®ä¸€èˆ¬æ˜¯éƒ¨ç½²åœ¨ä¸€ä¸ªæœåŠ¡å™¨ä¸Šï¼Œç„¶åç”¨æˆ·é€šè¿‡æµè§ˆå™¨è®¿é—®ã€‚å¦‚æœä½ ä¸ä¼šéƒ¨ç½²ï¼Œå¯ä»¥è¯·æ±‚ä½ æ‰€åœ¨çš„ç»„ç»‡çš„ITéƒ¨é—¨å»éƒ¨ç½²ï¼Œè¿™å¯¹ä»–ä»¬æ¥è¯´å¾ˆç®€å•ã€‚

## å·¥ä½œæµç¨‹

1. **è§†é¢‘ä¸Šä¼ **: ç”¨æˆ·ä¸Šä¼ å®éªŒå®¤ä»ªå™¨æ“ä½œè§†é¢‘ï¼ˆæ”¯æŒæœ€å¤§3GBï¼‰
3. **è¯­éŸ³è¯†åˆ«**: è‡ªåŠ¨æå–è§†é¢‘ä¸­çš„éŸ³é¢‘å¹¶è¿›è¡Œè½¬å½•
4. **è§†é¢‘å‹ç¼©**: è‡ªåŠ¨å‹ç¼©è§†é¢‘å¹¶åœ¨ç”»é¢ä¸Šå åŠ æ—¶é—´æˆ³
5. **è§†é¢‘ç†è§£**: ç»“åˆå‹ç¼©åçš„è§†é¢‘å’ŒéŸ³é¢‘å†…å®¹ï¼Œä½¿ç”¨ Qwen3-VL-Plus åˆ†ææ“ä½œæµç¨‹
6. **è‰ç¨¿è§£æ**: å°†è§†é¢‘ç†è§£ç»“æœæ‹†è§£ä¸ºç»“æ„åŒ–çš„SOPåŒºå—
7. **SOPä¿®æ”¹**: ç”¨æˆ·æˆ–AIå¯¹SOPåŒºå—å†…å®¹è¿›è¡Œç²¾ä¿®æ”¹è¿›
8. **æ–‡æ¡£å¯¼å‡º**: æ”¯æŒå¯¼å‡ºTXTæ ¼å¼ï¼ˆé€‚åˆä¿®æ”¹åå‘å¸ƒè‡³å¼€æ”¾è·å–å¹³å°ï¼‰å’ŒHTMLæ ¼å¼ï¼ˆé€‚åˆå®éªŒå®¤å†…éƒ¨ä½¿ç”¨ï¼‰

## é¡¹ç›®ç‰¹æ€§

- **å¤šæ¨¡æ€åˆ†æ**: ä½¿ç”¨Qwen3-VL-Pluså’ŒParaformer-V2å¯¹è§†é¢‘å’ŒéŸ³é¢‘å†…å®¹è¿›è¡Œç»¼åˆåˆ†æ
- **æ˜“é”™è¯è¡¨æ”¯æŒ**: æ”¯æŒç”¨æˆ·è‡ªå®šä¹‰æ˜“é”™è¯è¡¨ï¼Œæé«˜è¯­éŸ³è¯†åˆ«å‡†ç¡®æ€§ï¼Œé€‚ç”¨äºä¸“ä¸šæœ¯è¯­è¾ƒå¤šçš„åœºæ™¯
- **æ™ºèƒ½åˆ†æ®µå¤„ç†**: é•¿è§†é¢‘è‡ªåŠ¨åˆ†æ®µå¹¶è¡Œå¤„ç†ï¼Œç»“åˆæç¤ºè¯æ‹†åˆ†æŠ€æœ¯ï¼Œç¡®ä¿æ¯æ®µå¤„ç†è´¨é‡
- **èƒ½å¤„ç†çš„è§†é¢‘æ—¶é•¿**: åˆ†æ®µå¤„ç†é•¿è§†é¢‘ï¼Œæ— ç¡¬æ€§æ—¶é•¿ä¸Šé™
- **å¤šåª’ä½“SOP**: æ”¯æŒTXTå’ŒHTMLæ ¼å¼çš„æ–‡æ¡£å¯¼å‡ºåŠŸèƒ½ã€‚HTMLæ ¼å¼æ–‡æ¡£å¯åŒæ—¶å±•ç°æ–‡å­—å’Œè§†é¢‘ï¼Œå¸¦æ¥ç›´è§‚ç†è§£
- **å¯äº¤äº’ç¼–è¾‘åŒº**ï¼šSOPä¿®æ”¹åŒºä¸­çš„åŒºå—å¯ä»¥æ–¹ä¾¿åœ°ä¿®æ”¹å†…å®¹ã€è°ƒæ•´æ¬¡åºã€è·³è½¬å¹¶æ’­æ”¾è§†é¢‘ç‰‡æ®µä»¥æ ¸å®
- **æ“ä½œå†å²**: é‡è¦æ“ä½œä¼šè¢«è®°å½•ï¼Œä¾¿äºå›é¡¾
- **ä¼šè¯éš”ç¦»**: æ¯ä¸ªç”¨æˆ·ä¼šè¯ç‹¬ç«‹è¿è¡Œï¼Œé¿å…æ“ä½œå†²çª
- **å¼‚æ­¥å¹¶å‘**: æ”¯æŒå¤šä¸ªä¼šè¯åŒæ—¶è°ƒç”¨å·¥å…·ï¼Œæå‡ååé‡
- **ä¸­è‹±ç•Œé¢**ï¼šæ”¯æŒä¸­æ–‡æˆ–è‹±æ–‡ç•Œé¢ï¼Œæ”¯æŒå¯¼å‡ºä¸­æ–‡æˆ–è‹±æ–‡å†…å®¹

### å„ç¯èŠ‚ç”¨æ—¶å…¸å‹å€¼

| è§†é¢‘æ—¶é•¿ | æ–‡ä»¶å¤§å° | åˆ†è¾¨ç‡     | è§†é¢‘ä¸Šä¼  | è¯­éŸ³è¯†åˆ« | è§†é¢‘å‹ç¼©(720p, 2æ ¸) | è§†é¢‘å‹ç¼©(1080p, 2æ ¸) | è§†é¢‘ç†è§£(ä¸åˆ†æ®µ) | SOPè§£æ | AIç²¾ä¿® |
|:--------:|:--------:|:---------:|:--------:|:--------:|:------------------:|:--------------------:|:----------------:|:-------:|:------:|
| 9:38     | 1.37 GB  | 1080Ã—1920 | 10:08    | 0:13     | 10:13               | 11:50                 | 1:10             | 3:15    | 0:56   |
| 17:39    | 2.11 GB  | 1080Ã—1920 | 14:11    | 0:22     | 19:18               | 27:32                 | 1:12             | 2:46    | 1:19   |

## å³å°†å¢åŠ çš„åŠŸèƒ½

- æ”¯æŒä¸Šä¼ PDFæ–‡ä»¶ï¼Œä¾‹å¦‚å·²æœ‰çš„ä»ªå™¨ä½¿ç”¨è¯´æ˜ä¹¦ã€å·²æœ‰çš„SOPï¼Œä¾›AIå‚è€ƒ

## ç³»ç»Ÿæ¶æ„

### æ¶æ„ä¸»ä½“
```
å¤–éƒ¨è¯·æ±‚ (50001)
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Nginx         â”‚
â”‚   (åå‘ä»£ç†)     â”‚
â”‚   (ç«¯å£ 50001)  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”œâ”€â†’ / (é™æ€æ–‡ä»¶) â†’ Next.js (3000)
    â”œâ”€â†’ /api/* (API) â†’ FastAPI (8123)
    â””â”€â†’ /ws (WebSocket) â†’ FastAPI (8123)
                                           â”‚
                                           â–¼
                                   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                   â”‚   LangGraph     â”‚
                                   â”‚   Agent         â”‚
                                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                           â”‚
                                           â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚   Qwen3-VL-Plus â”‚  â”‚  Paraformer-V2  â”‚
                    â”‚   (è§†é¢‘ç†è§£)     â”‚  â”‚   (è¯­éŸ³è¯†åˆ«)     â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                           â”‚
                                           â–¼
                                   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                   â”‚   OSS Storage   â”‚
                                   â”‚   (æ–‡ä»¶å­˜å‚¨)     â”‚
                                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**æ¶æ„ç‰¹ç‚¹ï¼š**
- **ç»Ÿä¸€å…¥å£**ï¼šæ‰€æœ‰è¯·æ±‚é€šè¿‡ Nginx åœ¨ 50001 ç«¯å£ç»Ÿä¸€å¤„ç†
- **åå‘ä»£ç†**ï¼šNginx å°†è¯·æ±‚è·¯ç”±åˆ°å¯¹åº”çš„å†…éƒ¨æœåŠ¡
- **ç¯å¢ƒä¸€è‡´**ï¼šå¼€å‘å’Œç”Ÿäº§ç¯å¢ƒä½¿ç”¨å®Œå…¨ç›¸åŒçš„æ¶æ„

### åç«¯å¼€å‘
- ä½¿ç”¨ FastAPI æ¡†æ¶
- æ”¯æŒå¼‚æ­¥ WebSocket è¿æ¥
- é›†æˆ LangGraph çŠ¶æ€å›¾
- æ”¯æŒ LangSmith è¿½è¸ª
- OSS æ–‡ä»¶å­˜å‚¨ç®¡ç†
- å¤šæ¨¡æ€ AI æ¨¡å‹é›†æˆ
- ä¼šè¯éš”ç¦»å’ŒAgentå®ä¾‹æ± ç®¡ç†
- å¼‚æ­¥å¹¶å‘å¤„ç†ï¼Œæ”¯æŒå¤šä¼šè¯åŒæ—¶è°ƒç”¨å·¥å…·
- ä½¿ç”¨ `asyncio.to_thread` é¿å…åŒæ­¥è°ƒç”¨é˜»å¡äº‹ä»¶å¾ªç¯

### å‰ç«¯å¼€å‘
- ä½¿ç”¨ Next.js 15 + TypeScript
- Tailwind CSS æ ·å¼ + Typography æ’ä»¶
- è‡ªå®šä¹‰ WebSocket Hook
- å“åº”å¼è®¾è®¡
- Markdown æ¸²æŸ“æ”¯æŒ
- ç”Ÿäº§æ„å»ºä¼˜åŒ–ï¼ˆè‡ªåŠ¨é€‰æ‹©æœ€ä½³è¿è¡Œæ¨¡å¼ï¼‰
- ä¸¥æ ¼çš„TypeScriptç±»å‹æ£€æŸ¥

## ğŸš€ å¼€å‘æ¨¡å¼å¿«é€Ÿå¼€å§‹

### 1. é…ç½®ç¯å¢ƒå˜é‡

ç¼–è¾‘ `/root/video2sop/.env` æ–‡ä»¶ï¼š
```env
# å¤§æ¨¡å‹é…ç½®ï¼ˆå¿…é¡»ï¼‰
DASHSCOPE_API_KEY=your_dashscope_api_key_here

# OSS å­˜å‚¨é…ç½®ï¼ˆå¿…é¡»ï¼Œç”¨äºè§†é¢‘å’ŒéŸ³é¢‘æ–‡ä»¶å­˜å‚¨ï¼‰
OSS_ACCESS_KEY_ID=your_oss_access_key_id
OSS_ACCESS_KEY_SECRET=your_oss_access_key_secret
OSS_ENDPOINT=your_oss_endpoint
OSS_BUCKET_NAME=your_bucket_name

# ç¤ºä¾‹è§†é¢‘é…ç½®ï¼ˆå¯é€‰ï¼Œç”¨äºæ¼”ç¤ºåŠŸèƒ½ã€‚å¦‚æœä½¿ç”¨è¿™ä¸ªé…ç½®ï¼Œåº”åœ¨ç›¸åº”ç›®å½•å­˜æ”¾ç¤ºä¾‹è§†é¢‘ï¼‰
EXAMPLE_VIDEO_PATH=/root/video2sop/temp/video_example/your_example_video.mp4

# ç¤ºä¾‹è§†é¢‘æ˜“é”™è¯è¡¨ï¼ˆå¯é€‰ï¼Œä¸ç¤ºä¾‹è§†é¢‘é…åˆä½¿ç”¨ã€‚ä½¿ç”¨åˆ†å·åˆ†éš”å¤šä¸ªè¯ï¼Œå¦‚ï¼šç¡¬è„‚é…¸;æ‚¬æµŠæ¶²ï¼‰
EXAMPLE_VIDEO_VOCABULARY=Word1;Word2

# LangSmith è°ƒè¯•é…ç½®ï¼ˆå¯é€‰ï¼Œç”¨äºLangGraphæµ‹è¯•ï¼‰
LANGSMITH_API_KEY=your_langsmith_api_key_here
LANGSMITH_TRACING=true
LANGSMITH_PROJECT=video2sop
```

ç¡®è®¤ `/root/video2sop/chat-frontend/.env.development` æ–‡ä»¶ç¬¦åˆéœ€æ±‚ï¼š
```env
# WebSocket åœ°å€ï¼Œç”¨äºä¸åç«¯å®æ—¶é€šä¿¡
# ç»Ÿä¸€æ¶æ„ï¼šå¼€å‘å’Œç”Ÿäº§ç¯å¢ƒéƒ½é€šè¿‡ Nginx ä»£ç†
NEXT_PUBLIC_WS_URL=ws://127.0.0.1:50001/ws

# API åœ°å€
# ç»Ÿä¸€æ¶æ„ï¼šå¼€å‘å’Œç”Ÿäº§ç¯å¢ƒéƒ½é€šè¿‡ Nginx ä»£ç†
NEXT_PUBLIC_API_URL=http://127.0.0.1:50001/api

# å„åŠŸèƒ½è¶…æ—¶æ—¶é—´é…ç½®ï¼ˆæ¯«ç§’ï¼Œå¯é€‰ï¼‰
# è§†é¢‘ç†è§£è¶…æ—¶æ—¶é—´ï¼Œé»˜è®¤1800000ï¼ˆ30åˆ†é’Ÿï¼‰
NEXT_PUBLIC_VIDEO_UNDERSTANDING_TIMEOUT=1800000
# è¯­éŸ³è¯†åˆ«è¶…æ—¶æ—¶é—´ï¼Œé»˜è®¤300000ï¼ˆ5åˆ†é’Ÿï¼‰
NEXT_PUBLIC_SPEECH_RECOGNITION_TIMEOUT=300000
# SOPè§£æè¶…æ—¶æ—¶é—´ï¼Œé»˜è®¤1200000ï¼ˆ20åˆ†é’Ÿï¼‰
NEXT_PUBLIC_SOP_PARSE_TIMEOUT=1200000
# SOPç²¾ä¿®è¶…æ—¶æ—¶é—´ï¼Œé»˜è®¤1200000ï¼ˆ20åˆ†é’Ÿï¼‰
NEXT_PUBLIC_SOP_REFINE_TIMEOUT=1200000
# è§†é¢‘ä¸Šä¼ è¶…æ—¶æ—¶é—´ï¼Œé»˜è®¤600000ï¼ˆ10åˆ†é’Ÿï¼‰
NEXT_PUBLIC_VIDEO_UPLOAD_TIMEOUT=600000
# éŸ³é¢‘æå–è¶…æ—¶æ—¶é—´ï¼Œé»˜è®¤300000ï¼ˆ5åˆ†é’Ÿï¼‰
NEXT_PUBLIC_AUDIO_EXTRACT_TIMEOUT=300000

# è”ç³»æ–¹å¼ï¼ˆå¯é€‰ï¼‰
NEXT_PUBLIC_AUTHOR_EMAIL=your-email@example.com
NEXT_PUBLIC_APP_GITHUB=https://github.com/your-repo/video2sop
```

### 2. ä¸€é”®å¯åŠ¨

**å¼€å‘æ¨¡å¼å¯åŠ¨:**
```bash
cd /root/video2sop
./start_services.sh
```

**åœæ­¢æœåŠ¡:**
```bash
cd /root/video2sop
./stop_services.sh
```

### 3. æ‰‹åŠ¨å¯åŠ¨

**å¯åŠ¨åç«¯æœåŠ¡:**
```bash
cd /root/video2sop/langgraph-agent
pip install -r requirements.txt
python main.py
```

**å¯åŠ¨å‰ç«¯æœåŠ¡:**
```bash
cd /root/video2sop/chat-frontend
npm install
npm run dev
```

**ç¯å¢ƒå˜é‡æ–‡ä»¶è¯´æ˜**ï¼š
- æ‰‹åŠ¨å¯åŠ¨ä¼šä½¿ç”¨ç°æœ‰çš„ `.env.local` é…ç½®
- ä¸€é”®å¯åŠ¨è„šæœ¬ `start_services.sh` å°†å…ˆç”¨é¢„å®šä¹‰çš„ç¯å¢ƒé…ç½® `.env.development` **è¦†ç›–** `.env.local` æ–‡ä»¶ï¼Œåå¯åŠ¨

### 4. è®¿é—®åº”ç”¨

- å‰ç«¯ç•Œé¢: http://127.0.0.1:50001
- åç«¯ API: http://127.0.0.1:50001/api/*
- å¥åº·æ£€æŸ¥: http://127.0.0.1:50001/api/health
- WebSocket: ws://127.0.0.1:50001/ws

### 5. å¯åŠ¨æ–¹å¼å¯¹æ¯”

| ç‰¹æ€§ | å¼€å‘ç¯å¢ƒå¯åŠ¨ | ç”Ÿäº§ç¯å¢ƒå¯åŠ¨ï¼ˆè§åæ–‡ï¼‰ |
|------|-------------|-------------|
| **è¿è¡Œæ¨¡å¼** | å¼€å‘æ¨¡å¼ (`npm run dev`) | ç”Ÿäº§æ¨¡å¼ (`npm run start`) |
| **å¼€å‘å·¥å…·** | åŒ…å«çƒ­é‡è½½ã€å¼€å‘è¾…åŠ©æŒ‰é’® | ç”Ÿäº§æ¨¡å¼æ— å¼€å‘å·¥å…· |
| **æ€§èƒ½** | é€‚åˆå¼€å‘è°ƒè¯• | ç”Ÿäº§æ¨¡å¼æ€§èƒ½æ›´ä¼˜ |
| **è¿æ¥æ–­å¼€** | æœåŠ¡ä¼šåœæ­¢ | æœåŠ¡ç»§ç»­è¿è¡Œ |
| **é€‚ç”¨åœºæ™¯** | å¼€å‘è°ƒè¯• | å®¹å™¨åŒ–éƒ¨ç½²ï¼ˆç»å°”å¹³å°ç­‰ï¼‰ |
| **å¯åŠ¨é€Ÿåº¦** | å¿«é€Ÿ | ç¨æ…¢ï¼ˆéœ€æ„å»ºï¼‰ |
| **å®¹å™¨å…¼å®¹** | é€‚åˆå®¹å™¨éƒ¨ç½² | ä¸“ä¸ºå®¹å™¨åŒ–è®¾è®¡ |
| **ä¸»è¿›ç¨‹ç®¡ç†** | è„šæœ¬æŒç»­è¿è¡Œç›‘æ§æœåŠ¡ | åç«¯æœåŠ¡ä½œä¸ºä¸»è¿›ç¨‹ä¿æŒè¿è¡Œ |
| **åå‘ä»£ç†** | Nginxç»Ÿä¸€ä»£ç† | Nginxç»Ÿä¸€ä»£ç† |
| **ç«¯å£æš´éœ²** | ä»…50001ç«¯å£å¯¹å¤– | ä»…50001ç«¯å£å¯¹å¤– |
| **æ¶æ„ä¸€è‡´æ€§** | ä¸ç”Ÿäº§ç¯å¢ƒå®Œå…¨ä¸€è‡´ | ä¸å¼€å‘ç¯å¢ƒå®Œå…¨ä¸€è‡´ |

## ğŸš€ ç»å°”å¹³å°ç”Ÿäº§ç¯å¢ƒå¿«é€Ÿå¼€å§‹

### 1. ç»å°”å¹³å°ç‰¹æ€§è¯´æ˜
- **ç«¯å£æ˜ å°„**: åœ¨ç»å°”å¹³å°é…ç½®ä¸­æ˜ç¡®æŒ‡å®šç«¯å£æ˜ å°„ä¸º `50001`
- **åå‘ä»£ç†**: ç»å°”å¹³å°ä¼šè‡ªåŠ¨å°†è¯·æ±‚è½¬å‘åˆ°å®¹å™¨çš„50001ç«¯å£
- **åè®®è½¬æ¢**: ç»å°”å¹³å°è‡ªåŠ¨å¤„ç†HTTPSâ†’HTTPå’ŒWSSâ†’WSçš„åè®®è½¬æ¢
- **ç›¸å¯¹è·¯å¾„**: å‰ç«¯ä½¿ç”¨ç›¸å¯¹è·¯å¾„é…ç½®ï¼Œæ— éœ€ç¡¬ç¼–ç æœåŠ¡å™¨IP

### 2. ç¯å¢ƒå˜é‡é…ç½®
ç¡®è®¤ `.env` ä¸­çš„åç«¯ç¯å¢ƒå˜é‡å·²é…ç½®

ç¡®è®¤ `.env.production` ä¸­çš„å‰ç«¯ç¯å¢ƒå˜é‡å·²é…ç½®ï¼Œæ³¨æ„ä»¥ä¸‹ç¯å¢ƒå˜é‡ä¸ `.env.development` ä¸­çš„æœ‰ä¸åŒå–å€¼
```bash
NEXT_PUBLIC_WS_URL=/ws          # WebSocketç›¸å¯¹è·¯å¾„
NEXT_PUBLIC_API_URL=./api       # APIåŸºç¡€è·¯å¾„ï¼ˆä½¿ç”¨./apié¿å…ç›¸å¯¹è·¯å¾„è§£æé—®é¢˜ï¼‰
```

`start_services_persistent.sh` å°†å…ˆç”¨é¢„å®šä¹‰çš„ç¯å¢ƒé…ç½® `.env.development` **è¦†ç›–** `.env.local` æ–‡ä»¶ï¼Œåæ„å»ºå‰ç«¯ï¼Œæœ€åå¯åŠ¨å‰ç«¯å’Œåç«¯

### 3. éƒ¨ç½²æ­¥éª¤
1. åœ¨ç»å°”å¹³å°æ„å»ºé•œåƒ
2. åœ¨ç»å°”å¹³å°å¼€å‘è€…ä¸­å¿ƒç›¸åº”Appå†…ï¼Œæ–°å»ºç‰ˆæœ¬ï¼Œé€‰æ‹©åˆšæ„å»ºçš„é•œåƒï¼Œé…ç½®å¯åŠ¨å‘½ä»¤ä¸º `cd /root/video2sop && ./start_services_persistent.sh` ï¼ŒæœåŠ¡ç«¯å£ä¸º `50001`
3. ä»¥è¿™ä¸ªç‰ˆæœ¬éƒ¨ç½²æœåŠ¡
4. å‘å¸ƒè¿™ä¸ªæœåŠ¡

**éƒ¨ç½²ç‰¹ç‚¹:**
- **ç¯å¢ƒå˜é‡é…ç½®**: è‡ªåŠ¨é…ç½®ç»å°”å¹³å°ç”Ÿäº§ç¯å¢ƒå¿…éœ€çš„ç¯å¢ƒå˜é‡
- **è‡ªåŠ¨ä¾èµ–å®‰è£…**: è„šæœ¬è‡ªåŠ¨å®‰è£…Node.jsã€npmã€FFmpegç­‰ä¾èµ–
- **WebSocketæ”¯æŒ**: é€šè¿‡Nginxä»£ç†WebSocketè¿æ¥ï¼Œè§£å†³ç»å°”å¹³å°ä»£ç†æ‹¦æˆªé—®é¢˜
- **æ™ºèƒ½æ„å»º**: è‡ªåŠ¨å°è¯•ç”Ÿäº§æ„å»ºï¼Œå¤±è´¥æ—¶å›é€€åˆ°å¼€å‘æ¨¡å¼
- **å®¹å™¨æŒä¹…åŒ–**: åç«¯æœåŠ¡ä½œä¸ºä¸»è¿›ç¨‹ï¼Œç¡®ä¿å®¹å™¨ä¸ä¼šé€€å‡º
- **æ—¥å¿—ç®¡ç†**: æ‰€æœ‰æ—¥å¿—è¾“å‡ºåˆ° `/root/video2sop/logs/` ç›®å½•

**éƒ¨ç½²åçŠ¶æ€æ£€æŸ¥:**
```bash
# è¿è¡ŒçŠ¶æ€æ£€æŸ¥è„šæœ¬
cd /root/video2sop
./check_deployment_status.sh

# è¿è¡ŒWebSocketé…ç½®æµ‹è¯•
./test_websocket_config.sh
```

## ğŸ”„ æ›´æ–°æ—¥å¿—

- **v1.8.0** - è¯­éŸ³è¯†åˆ«å¢å¼ºå’ŒUIä¼˜åŒ–
  - æ–°å¢æ˜“é”™è¯è¡¨è¾“å…¥åŠŸèƒ½ï¼Œç”¨æˆ·å¯åœ¨è¯­éŸ³è¯†åˆ«é¢æ¿ä¸­è¾“å…¥æ˜“é”™è¯ä»¥æé«˜è¯†åˆ«å‡†ç¡®æ€§
  - ä¿®å¤ DashScope çš„ paraformer-v2 API è°ƒç”¨é—®é¢˜ï¼šä½¿ç”¨`phrase_id`å‚æ•°ä¼šå¯¼è‡´`403 Resource access denied`é”™è¯¯ï¼Œåº”å½“æ”¹ä¸ºä½¿ç”¨`vocabulary_id`å‚æ•°
  - ä¼˜åŒ–UI

- **v1.7.0** - è§†é¢‘å‹ç¼©ã€é•¿è§†é¢‘åˆ†æ®µå¤„ç†
  - å°†è§†é¢‘ä¸Šä¼ æ–‡ä»¶å¤§å°é™åˆ¶ä»800MBæå‡è‡³3GBï¼Œæ”¯æŒæ›´å¤§è§†é¢‘æ–‡ä»¶
  - ä¼˜åŒ–å†…å­˜ç®¡ç†ï¼Œä½¿ç”¨æµå¼æ–‡ä»¶å¤„ç†é¿å…å¤§æ–‡ä»¶å†…å­˜æº¢å‡º
  - é›†æˆè§†é¢‘å‹ç¼©åŠŸèƒ½ï¼Œè‡ªåŠ¨å‹ç¼©ä¸Šä¼ çš„è§†é¢‘å¹¶åœ¨ç”»é¢ä¸Šå åŠ æ—¶é—´æˆ³
  - ä¿®å¤è§†é¢‘å‹ç¼©è¿‡ç¨‹ä¸­FFmpeg stderrç®¡é“é˜»å¡å¯¼è‡´çš„è¿›åº¦å¡æ­»é—®é¢˜
  - å®ç°é•¿è§†é¢‘è‡ªåŠ¨åˆ†æ®µã€å¹¶è¡Œç†è§£ã€å†æ•´åˆåœ¨ä¸€èµ·
  - æ–°å¢æç¤ºè¯æ™ºèƒ½æ‹†åˆ†åŠŸèƒ½ï¼Œä¸ºé•¿è§†é¢‘åˆ†æ®µå¤„ç†æä¾›é’ˆå¯¹æ€§æç¤ºè¯
  - ä¿®å¤ä¸‹è½½å‹ç¼©è§†é¢‘è¯¯åˆ ä¼šè¯æ–‡ä»¶ï¼Œé‡‡ç”¨å‰ç«¯Blobä¸‹è½½
  - å‰ç«¯å®ç°å®Œæ•´ä¸­è‹±æ–‡å›½é™…åŒ–ï¼šUIã€æ“ä½œè®°å½•ã€å¯¼å‡ºå†…å®¹å‡æ”¯æŒåŒè¯­å’Œå…œåº•æœ¬åœ°åŒ–ï¼Œæç¤ºè¯éšç•Œé¢è¯­è¨€åˆ‡æ¢

- **v1.6.0** - ç»å°”å¹³å°ç›¸å¯¹è·¯å¾„é…ç½®ä¼˜åŒ–
  - ä¿®æ”¹ç”Ÿäº§ç¯å¢ƒå¯åŠ¨è„šæœ¬ä½¿ç”¨ç›¸å¯¹è·¯å¾„é…ç½®ï¼Œè§£å†³ç»å°”å¹³å°WebSocketè¿æ¥å¤±è´¥é—®é¢˜
  - å‰ç«¯ç¯å¢ƒå˜é‡æ”¹ä¸ºç›¸å¯¹è·¯å¾„ï¼š`NEXT_PUBLIC_WS_URL=/ws` å’Œ `NEXT_PUBLIC_API_URL=./api`
  - é‡æ„APIç«¯ç‚¹é…ç½®ï¼šç§»é™¤APIç«¯ç‚¹ä¸­çš„ `/api` å‰ç¼€ï¼Œé€šè¿‡ç¯å¢ƒå˜é‡ç»Ÿä¸€æ§åˆ¶
  - ä¿®å¤APIè·¯å¾„è§£æé—®é¢˜ï¼šä½¿ç”¨ `./api` é¿å…ç›¸å¯¹è·¯å¾„è¢«é”™è¯¯è§£æä¸º `https://api/...`
  - å®ç°å¤šç¯å¢ƒé…ç½®æ–‡ä»¶ç®¡ç†ï¼šåˆ›å»º `.env.development` å’Œ `.env.production` æ–‡ä»¶å¹¶åŠ å…¥gitè·Ÿè¸ª

- **v1.5.1** - ç»å°”å¹³å°WebSocketè¿æ¥ä¼˜åŒ–å’Œéƒ¨ç½²å·¥å…·å®Œå–„
  - æŒ‰ç…§ç»å°”å®˜æ–¹å»ºè®®ä¼˜åŒ–Nginx WebSocketä»£ç†é…ç½®ï¼Œæ·»åŠ proxy_cache_bypass $http_upgradeå…³é”®è®¾ç½®
  - ç»Ÿä¸€Nginxä»£ç†è¶…æ—¶é…ç½®ä¸º30åˆ†é’Ÿï¼Œç¡®ä¿é•¿æ—¶é—´AIå¤„ç†ä»»åŠ¡æ­£å¸¸å®Œæˆ
  - æ–°å¢éƒ¨ç½²åçŠ¶æ€æ£€æŸ¥è„šæœ¬check_deployment_status.shï¼Œæ”¯æŒç»å°”å¹³å°ç¯å¢ƒå…¨é¢è¯Šæ–­
  - æ–°å¢WebSocketé…ç½®æµ‹è¯•è„šæœ¬test_websocket_config.shï¼Œä¾¿äºWebSocketè¿æ¥é—®é¢˜æ’æŸ¥

- **v1.5.0** - Nginxåå‘ä»£ç†é…ç½®å’Œé¡¹ç›®ç»“æ„ä¼˜åŒ–
  - æ·»åŠ Nginxåå‘ä»£ç†ï¼Œç»Ÿä¸€å¼€å‘å’Œç”Ÿäº§ç¯å¢ƒæ¶æ„ï¼Œè§£å†³ç»å°”å¹³å°WebSocketä»£ç†æ‹¦æˆªé—®é¢˜
  - é‡æ„ç«¯å£é…ç½®ï¼šå‰ç«¯3000ç«¯å£ï¼Œé€šè¿‡Nginxåœ¨50001ç«¯å£ç»Ÿä¸€ä»£ç†ï¼Œä»…50001ç«¯å£å¯¹å¤–æš´éœ²
  - ä¸ºæ‰€æœ‰APIç«¯ç‚¹æ·»åŠ  `/api` å‰ç¼€ï¼Œæ›´æ–°CORSé…ç½®æ”¯æŒç»å°”å¹³å°åŸŸåè®¿é—®
  - é‡æ–°ç»„ç»‡é¡¹ç›®ç»“æ„ï¼Œåˆ›å»ºtestså’Œdocsæ–‡ä»¶å¤¹ï¼Œç»Ÿä¸€é¡¹ç›®è·¯å¾„ä»/root/appåˆ°/root/video2sop
  - ä¼˜åŒ–å¯åŠ¨è„šæœ¬ï¼Œè‡ªåŠ¨å®‰è£…Nginxã€Node.jsã€npmã€FFmpegç­‰ä¾èµ–ï¼Œå¢å¼ºç¯å¢ƒå˜é‡æ£€æŸ¥
  - ä¿®å¤å‰ç«¯CORSé…ç½®é—®é¢˜ï¼Œä¼˜åŒ–è¶…æ—¶å¤„ç†ï¼šæ”¯æŒç¯å¢ƒå˜é‡é…ç½®å„åŠŸèƒ½è¶…æ—¶æ—¶é—´
  - ä¿®å¤Nginxä»£ç†è¶…æ—¶é—®é¢˜ï¼Œå°†APIä»£ç†è¶…æ—¶ä»60ç§’ä¼˜åŒ–ä¸º30åˆ†é’Ÿã€‚æ‰€æœ‰åŠŸèƒ½çš„æ—¶é—´é™åˆ¶éƒ½å—æ­¤é™åˆ¶ã€‚
  - ä¼˜åŒ–ç¤ºä¾‹è§†é¢‘åŠŸèƒ½ï¼Œæ”¯æŒç¯å¢ƒå˜é‡é…ç½®ç¤ºä¾‹è§†é¢‘è·¯å¾„

- **v1.4.0** - è§†é¢‘ä¿ç•™åŠŸèƒ½å’Œå®¹å™¨åŒ–éƒ¨ç½²ä¼˜åŒ–
  - å®ç°è§†é¢‘ä¿ç•™åŠŸèƒ½ï¼Œç”¨æˆ·å¯é€‰æ‹©å…è®¸è¿è¥è€…ä¿ç•™è§†é¢‘ä»¥åˆ†æå¼‚å¸¸
  - ä¼˜åŒ–UIç•Œé¢
  - é‡æ„ç”Ÿäº§ç¯å¢ƒå¯åŠ¨è„šæœ¬ï¼Œåç«¯æœåŠ¡ä½œä¸ºä¸»è¿›ç¨‹ï¼Œä¸“ä¸ºå®¹å™¨åŒ–éƒ¨ç½²è®¾è®¡

- **v1.3.0** - å¹¶å‘æ€§èƒ½ä¼˜åŒ–å’Œä¼šè¯ç®¡ç†
  - ä¼˜åŒ–å¤§æ¨¡å‹APIè°ƒç”¨ï¼Œå®ç°å¼‚æ­¥å¹¶å‘å¤„ç†ï¼Œæ”¯æŒå¤šä¼šè¯åŒæ—¶æ“ä½œ
  - æ·»åŠ ä¼šè¯éš”ç¦»å’Œè¶…æ—¶æ¸…ç†
  - Agentå®ä¾‹æ± ç®¡ç†

- **v1.2.0** - ä¼šè¯éš”ç¦»å’Œç”Ÿäº§æ¨¡å¼ä¼˜åŒ–
  - å®ç°æµè§ˆå™¨æ ‡ç­¾é¡µä¼šè¯éš”ç¦»
  - æ–°å¢æŒä¹…åŒ–æœåŠ¡å¯åŠ¨è„šæœ¬ï¼ˆè‡ªåŠ¨é€‰æ‹©ç”Ÿäº§/å¼€å‘æ¨¡å¼ï¼‰
  - ä¿®å¤æ‰€æœ‰TypeScriptç±»å‹é”™è¯¯ï¼Œæ”¯æŒä¸¥æ ¼ç”Ÿäº§æ„å»º
  - æ”¹è¿›ç”¨æˆ·ä½“éªŒå’Œç•Œé¢äº¤äº’

- **v1.1.0** - Video2SOP åŸºç¡€ç‰ˆæœ¬
  - é›†æˆ Qwen3-VL-Plus è§†é¢‘ç†è§£æ¨¡å‹
  - é›†æˆ Paraformer-V2 è¯­éŸ³è¯†åˆ«
  - å®ç°è§†é¢‘ä¸Šä¼ å’Œ OSS å­˜å‚¨
  - æ”¯æŒ SOP æ–‡æ¡£è‡ªåŠ¨ç”Ÿæˆ

## ğŸ“ é¡¹ç›®ç»“æ„

```
/root/video2sop/
â”œâ”€â”€ langgraph-agent/                    # åç«¯æœåŠ¡
â”‚   â”œâ”€â”€ main.py                        # FastAPI ä¸»åº”ç”¨
â”‚   â”œâ”€â”€ agent.py                       # LangGraph Agent
â”‚   â”œâ”€â”€ video_understanding_tool.py    # è§†é¢‘ç†è§£å·¥å…·
â”‚   â”œâ”€â”€ video_processor.py             # è§†é¢‘å¤„ç†å·¥å…·ï¼ˆå‹ç¼©ã€åˆ†æ®µã€æ—¶é—´æˆ³ï¼‰
â”‚   â”œâ”€â”€ prompt_splitter_tool.py        # æç¤ºè¯æ‹†åˆ†å·¥å…·
â”‚   â”œâ”€â”€ sop_integration_tool.py        # SOPç‰‡æ®µæ•´åˆå·¥å…·
â”‚   â”œâ”€â”€ speech_tool.py                 # è¯­éŸ³è¯†åˆ«å·¥å…·
â”‚   â”œâ”€â”€ sop_parser_tool.py             # SOPè§£æå·¥å…·
â”‚   â”œâ”€â”€ sop_refine_tool.py             # SOPç²¾ä¿®å·¥å…·
â”‚   â”œâ”€â”€ local_storage_manager.py       # æœ¬åœ°å­˜å‚¨ç®¡ç†
â”‚   â”œâ”€â”€ oss_manager.py                 # OSSå­˜å‚¨ç®¡ç†
â”‚   â”œâ”€â”€ oss_api.py                     # OSS APIè·¯ç”±
â”‚   â”œâ”€â”€ audio_extractor.py             # éŸ³é¢‘æå–å·¥å…·ï¼ˆåŒ…å«éŸ³é¢‘æµæ£€æŸ¥ï¼‰
â”‚   â”œâ”€â”€ requirements.txt               # Python ä¾èµ–
â”‚   â””â”€â”€ README.md                     # åç«¯æ–‡æ¡£
â”œâ”€â”€ chat-frontend/                     # å‰ç«¯åº”ç”¨
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ app/
â”‚   â”‚   â”‚   â”œâ”€â”€ page.tsx              # ä¸»é¡µé¢
â”‚   â”‚   â”‚   â””â”€â”€ layout.tsx            # å¸ƒå±€ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”‚   â”œâ”€â”€ VideoUploader.tsx     # è§†é¢‘ä¸Šä¼ ç»„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ SpeechRecognitionPanel.tsx  # è¯­éŸ³è¯†åˆ«ç»„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ VideoUnderstandingPanel.tsx # è§†é¢‘ç†è§£ç»„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ OperationHistory.tsx  # æ“ä½œå†å²ç»„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ SOPEditor.tsx         # SOPç¼–è¾‘å™¨ç»„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ SOPBlockItem.tsx      # SOPåŒºå—é¡¹ç»„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ SOPVideoPlayer.tsx    # SOPè§†é¢‘æ’­æ”¾å™¨ç»„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ FloatingVideoPlayer.tsx # æ‚¬æµ®è§†é¢‘æ’­æ”¾å™¨ç»„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ SOPExporter.tsx       # SOPå¯¼å‡ºç»„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ ChatSidebar.tsx       # èŠå¤©ä¾§è¾¹æ ç»„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ LanguageSwitcher.tsx # è¯­è¨€åˆ‡æ¢ç»„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ Icon.tsx              # å›¾æ ‡ç»„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ Modal.tsx             # æ¨¡æ€æ¡†ç»„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ FeedbackModal.tsx     # åé¦ˆæ¨¡æ€æ¡†ç»„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ SubscribeModal.tsx    # è®¢é˜…æ¨¡æ€æ¡†ç»„ä»¶
â”‚   â”‚   â”‚   â””â”€â”€ ResizableLayout.tsx   # å¯è°ƒæ•´å¤§å°å¸ƒå±€ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ hooks/
â”‚   â”‚   â”‚   â””â”€â”€ useWebSocket.ts       # WebSocket é’©å­
â”‚   â”‚   â”œâ”€â”€ i18n/                     # å›½é™…åŒ–é…ç½®
â”‚   â”‚   â”‚   â”œâ”€â”€ index.tsx             # i18nä¸»æ–‡ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ zh.ts                 # ä¸­æ–‡ç¿»è¯‘
â”‚   â”‚   â”‚   â””â”€â”€ en.ts                 # è‹±æ–‡ç¿»è¯‘
â”‚   â”‚   â”œâ”€â”€ types/                    # TypeScriptç±»å‹å®šä¹‰
â”‚   â”‚   â”‚   â””â”€â”€ sop.ts                # SOPç›¸å…³ç±»å‹
â”‚   â”‚   â”œâ”€â”€ utils/                    # å·¥å…·å‡½æ•°
â”‚   â”‚   â”‚   â”œâ”€â”€ statusMap.ts          # çŠ¶æ€æ¶ˆæ¯æ˜ å°„
â”‚   â”‚   â”‚   â””â”€â”€ notifications.ts     # é€šçŸ¥ç®¡ç†
â”‚   â”‚   â””â”€â”€ config/                   # é…ç½®æ–‡ä»¶
â”‚   â”‚       â””â”€â”€ api.ts                # APIç«¯ç‚¹é…ç½®
â”‚   â”œâ”€â”€ package.json                  # å‰ç«¯ä¾èµ–
â”‚   â”œâ”€â”€ tailwind.config.js           # Tailwindé…ç½®
â”‚   â””â”€â”€ README.md                    # å‰ç«¯æ–‡æ¡£
â”œâ”€â”€ temp/
â”‚   â”œâ”€â”€ model_example/               # æ¨¡å‹ç¤ºä¾‹
â”‚   â”‚   â”œâ”€â”€ qwen3_vl_plus_video.py  # è§†é¢‘ç†è§£å‚è€ƒå®ç°
â”‚   â”‚   â””â”€â”€ paraformer-v2.py        # è¯­éŸ³è¯†åˆ«å‚è€ƒå®ç°
â”‚   â””â”€â”€ manuscript_video_understanding/  # ç”Ÿæˆçš„æ–‡æ¡£ç¤ºä¾‹
â”œâ”€â”€ tests/                          # æµ‹è¯•æ–‡ä»¶
â”‚   â”œâ”€â”€ test_*.py                   # Pythonæµ‹è¯•è„šæœ¬
â”‚   â””â”€â”€ test_*.html                 # HTMLæµ‹è¯•é¡µé¢
â”œâ”€â”€ docs/                           # æ–‡æ¡£æ–‡ä»¶
â”‚   â””â”€â”€ *.md                        # æŠ€æœ¯æ–‡æ¡£
â”œâ”€â”€ start_services.sh                # æ ‡å‡†å¯åŠ¨è„šæœ¬
â”œâ”€â”€ start_services_persistent.sh     # æŒä¹…åŒ–å¯åŠ¨è„šæœ¬
â”œâ”€â”€ stop_services.sh                 # åœæ­¢æœåŠ¡è„šæœ¬
â”œâ”€â”€ nginx.conf                       # Nginxé…ç½®æ–‡ä»¶
â”œâ”€â”€ app.service                      # ç³»ç»ŸæœåŠ¡é…ç½®
â”œâ”€â”€ TROUBLESHOOTING.md               # æ•…éšœæ’é™¤æŒ‡å—
â””â”€â”€ .env                            # ç¯å¢ƒå˜é‡é…ç½®
```

## ğŸ”„ ä¼šè¯ç®¡ç†

ç³»ç»Ÿå®ç°äº†åŸºäºclient_session_idçš„ä¼šè¯éš”ç¦»æœºåˆ¶ï¼š

### ä¼šè¯ç‰¹æ€§

- æ¯ä¸ªæµè§ˆå™¨æ ‡ç­¾é¡µæ‹¥æœ‰ç‹¬ç«‹çš„ä¼šè¯ID
- ä¼šè¯è¶…æ—¶æ—¶é—´ï¼š1å°æ—¶ï¼ˆä»æœ€åæ´»è·ƒæ—¶é—´èµ·ç®—ï¼‰
- Agentå®ä¾‹æ± ï¼š3ä¸ªå®ä¾‹ï¼Œè½®æµåˆ†é…ç»™æ–°ä¼šè¯
- è‡ªåŠ¨æ¸…ç†ï¼šåˆ›å»ºæ–°ä¼šè¯æ—¶è‡ªåŠ¨æ¸…ç†è¿‡æœŸä¼šè¯

### ä¼šè¯æ´»è·ƒåˆ¤å®š

ä»¥ä¸‹æ“ä½œä¼šæ›´æ–°ä¼šè¯æ´»è·ƒæ—¶é—´ï¼š
- WebSocketå¿ƒè·³æ¶ˆæ¯ï¼ˆæ¯30ç§’ï¼‰
- è¯­éŸ³è¯†åˆ«è¯·æ±‚
- è§†é¢‘ç†è§£è¯·æ±‚
- SOPè§£æ/ç²¾ä¿®è¯·æ±‚

### ç›‘æ§ä¼šè¯çŠ¶æ€

è®¿é—® `/api/sessions/stats` ç«¯ç‚¹æŸ¥çœ‹å½“å‰æ´»è·ƒä¼šè¯ï¼š

```bash
curl http://127.0.0.1:50001/api/sessions/stats
```

è¿”å›ä¿¡æ¯åŒ…æ‹¬ï¼š
- æ´»è·ƒä¼šè¯æ•°é‡
- æ¯ä¸ªä¼šè¯çš„æ¶ˆæ¯æ•°é‡
- åˆ†é…çš„Agentå®ä¾‹
- æœ€åæ´»è·ƒæ—¶é—´
- ä¸æ´»è·ƒæ—¶é•¿

### æŠ€æœ¯å®ç°

- **ä¼šè¯å­˜å‚¨**ï¼šä½¿ç”¨å†…å­˜å­—å…¸å­˜å‚¨ä¼šè¯ä¿¡æ¯ï¼ŒåŒ…å«å†å²è®°å½•ã€æ´»è·ƒæ—¶é—´å’Œåˆ†é…çš„Agentç´¢å¼•
- **Agentå®ä¾‹æ± **ï¼š3ä¸ªç‹¬ç«‹çš„QwenAgentå®ä¾‹ï¼Œè½®æµåˆ†é…ç»™æ–°ä¼šè¯
- **è‡ªåŠ¨æ¸…ç†**ï¼šåˆ›å»ºæ–°ä¼šè¯æ—¶è‡ªåŠ¨æ¸…ç†1å°æ—¶æœªæ´»åŠ¨çš„è¿‡æœŸä¼šè¯
- **å¹¶å‘å®‰å…¨**ï¼šä½¿ç”¨asyncio.to_threadç¡®ä¿åŒæ­¥APIè°ƒç”¨ä¸é˜»å¡äº‹ä»¶å¾ªç¯

## â±ï¸ è¶…æ—¶é…ç½®è¯´æ˜

### è¶…æ—¶é…ç½®ç­–ç•¥

ç³»ç»Ÿé‡‡ç”¨**åˆ†å±‚è¶…æ—¶æ§åˆ¶**ç­–ç•¥ï¼Œç¡®ä¿é•¿æ—¶é—´è¿è¡Œçš„AIå¤„ç†ä»»åŠ¡èƒ½å¤Ÿæ­£å¸¸å®Œæˆï¼š

| å±‚çº§ | é…ç½®ä½ç½® | è¶…æ—¶æ—¶é—´ | è¯´æ˜ |
|------|----------|----------|------|
| **å‰ç«¯æ§åˆ¶** | `.env.local` | å„åŠŸèƒ½ç‹¬ç«‹é…ç½® | ç²¾ç¡®æ§åˆ¶æ¯ä¸ªåŠŸèƒ½çš„è¶…æ—¶æ—¶é—´ |
| **Nginxä»£ç†** | `nginx.conf` | 30åˆ†é’Ÿ (1800s) | ç»Ÿä¸€ä»£ç†è¶…æ—¶ï¼Œæ”¯æŒæ‰€æœ‰APIè¯·æ±‚ |
| **åç«¯å¤„ç†** | æ— é™åˆ¶ | æ— é™åˆ¶ | åç«¯æœåŠ¡æ— è¶…æ—¶é™åˆ¶ |

### å½“å‰è¶…æ—¶é…ç½®

| åŠŸèƒ½ | å‰ç«¯è¶…æ—¶ | è®¾è®¡ç†ç”± |
|------|----------|----------|
| **è§†é¢‘ç†è§£** | 30åˆ†é’Ÿ | è°ƒç”¨Qwen3-VL-Plusï¼Œå¤„ç†å¤æ‚è§†é¢‘å†…å®¹ |
| **SOPè§£æ** | 20åˆ†é’Ÿ | è°ƒç”¨qwen-plusï¼Œå¤„ç†é•¿è§†é¢‘å†…å®¹ |
| **SOPç²¾ä¿®** | 20åˆ†é’Ÿ | è°ƒç”¨qwen-plusï¼Œå¤„ç†é•¿è§†é¢‘å†…å®¹ |
| **è§†é¢‘ä¸Šä¼ ** | 10åˆ†é’Ÿ | å¤§æ–‡ä»¶ä¸Šä¼ ï¼Œé€šå¸¸è¾ƒå¿«å®Œæˆ |
| **è¯­éŸ³è¯†åˆ«** | 5åˆ†é’Ÿ | è°ƒç”¨Paraformer-V2ï¼Œå¤„ç†è¾ƒå¿« |
| **éŸ³é¢‘æå–** | 5åˆ†é’Ÿ | FFmpegå¤„ç†ï¼Œé€šå¸¸å¾ˆå¿« |

### è‡ªå®šä¹‰è¶…æ—¶é…ç½®

å¦‚éœ€è°ƒæ•´è¶…æ—¶æ—¶é—´ï¼Œä¿®æ”¹ `chat-frontend/.env.local` æ–‡ä»¶ï¼š

```env
# ä¾‹å¦‚ï¼šå°†è§†é¢‘ç†è§£è¶…æ—¶æ”¹ä¸º45åˆ†é’Ÿ
NEXT_PUBLIC_VIDEO_UNDERSTANDING_TIMEOUT=2700000

# ä¾‹å¦‚ï¼šå°†SOPè§£æè¶…æ—¶æ”¹ä¸º30åˆ†é’Ÿ
NEXT_PUBLIC_SOP_PARSE_TIMEOUT=1800000
```

**æ³¨æ„**ï¼šNginxä»£ç†è¶…æ—¶å·²è®¾ç½®ä¸º30åˆ†é’Ÿï¼Œå¦‚éœ€æ›´é•¿çš„å¤„ç†æ—¶é—´ï¼Œè¯·åŒæ—¶è°ƒæ•´Nginxé…ç½®ã€‚

## ğŸ”§ API æ–‡æ¡£

### WebSocket ç«¯ç‚¹

**è¿æ¥åœ°å€:** `ws://127.0.0.1:50001/ws`

**æ¥æ”¶æ¶ˆæ¯æ ¼å¼:**
```json
// è§†é¢‘ä¸Šä¼ å®Œæˆ
{
  "type": "upload_complete",
  "video_url": "https://...",
  "audio_url": "https://...",
  "session_id": "session_123"
}

// è¯­éŸ³è¯†åˆ«å®Œæˆ
{
  "type": "speech_recognition_complete",
  "message": "è¯­éŸ³è¯†åˆ«å·²æ‰§è¡Œ",
  "result": "è½¬å½•æ–‡æœ¬å†…å®¹"
}

// è§†é¢‘ç†è§£å®Œæˆ
{
  "type": "video_understanding_complete",
  "message": "è§†é¢‘ç†è§£å·²æ‰§è¡Œ",
  "result": "SOPæ–‡æ¡£å†…å®¹",
  "fps": 2,
  "has_audio_context": true
}

// è§†é¢‘å‹ç¼©è¿›åº¦
{
  "type": "compression_progress",
  "current_frame": 1500,
  "total_frames": 3000,
  "percentage": 50,
  "message": "å‹ç¼©ä¸­... 1500/3000 å¸§ (50%)"
}

// é•¿è§†é¢‘åˆ†æ®µå¤„ç†
{
  "type": "segment_processing",
  "segment_id": 1,
  "time_range": "00:00-15:00"
}

// ç‰‡æ®µå¤„ç†å®Œæˆ
{
  "type": "segment_completed",
  "segment_id": 1,
  "time_range": "00:00-15:00",
  "result": "ç‰‡æ®µå¤„ç†ç»“æœ"
}

// ç‰‡æ®µæ•´åˆå®Œæˆ
{
  "type": "integration_completed",
  "result": "æ•´åˆåçš„å®Œæ•´SOPæ–‡æ¡£"
}

// SOPè§£æå®Œæˆ
{
  "type": "sop_parse_complete",
  "message": "SOPè§£æå®Œæˆï¼Œå…±ç”Ÿæˆ x ä¸ªåŒºå—",
  "blocks_count": 5
}

// SOPç²¾ä¿®å®Œæˆ
{
  "type": "sop_refine_complete",
  "message": "SOPç²¾ä¿®å®Œæˆï¼Œå…±å¤„ç† x ä¸ªåŒºå—",
  "blocks_count": 5,
  "has_user_notes": true
}

// æ–‡ä»¶åˆ é™¤å®Œæˆ
{
  "type": "file_removed",
  "message": "ä¸Šä¼ çš„æ–‡ä»¶å·²ä»æœåŠ¡å™¨åˆ é™¤ï¼ˆå…±åˆ é™¤ x ä¸ªæ–‡ä»¶ï¼‰",
  "deleted_count": 2
}

// å·¥å…·è°ƒç”¨çŠ¶æ€
{
  "type": "tool_call",
  "tool_name": "video_understanding",
  "status": "running|completed"
}

// é”™è¯¯ä¿¡æ¯
{
  "type": "error",
  "content": "é”™è¯¯æè¿°"
}
```

### HTTP ç«¯ç‚¹

- `GET /` - æ ¹è·¯å¾„ä¿¡æ¯
- `GET /api/health` - å¥åº·æ£€æŸ¥
- `GET /api/sessions/stats` - ä¼šè¯ç»Ÿè®¡ä¿¡æ¯
- `POST /api/load_example_video` - åŠ è½½ç¤ºä¾‹è§†é¢‘
- `POST /api/upload_video_to_backend` - è§†é¢‘ä¸Šä¼ åˆ°åç«¯
- `POST /api/speech_recognition` - è¯­éŸ³è¯†åˆ«
- `POST /api/video_understanding` - çŸ­è§†é¢‘ç†è§£
- `POST /api/video_understanding_long` - é•¿è§†é¢‘ç†è§£ï¼ˆæ”¯æŒåˆ†æ®µå¤„ç†ï¼‰
- `GET /api/get_video_duration` - è·å–è§†é¢‘æ—¶é•¿
- `POST /api/parse_sop` - SOPè§£æ
- `POST /api/refine_sop` - SOPç²¾ä¿®
- `GET /api/download_compressed_video` - ä¸‹è½½å‹ç¼©è§†é¢‘
- `GET /api/exists_compressed_video` - æ£€æŸ¥å‹ç¼©è§†é¢‘æ˜¯å¦å­˜åœ¨ï¼ˆè¿”å›200è¡¨ç¤ºå­˜åœ¨ï¼Œ404è¡¨ç¤ºä¸å­˜åœ¨ï¼‰
- `POST /api/cancel_compression` - å–æ¶ˆè§†é¢‘å‹ç¼©
- `POST /api/delete_session_files` - åˆ é™¤ä¼šè¯æ–‡ä»¶
- `POST /api/cleanup_files` - æ¸…ç†æ–‡ä»¶

## ğŸ› æ•…éšœæ’é™¤

å¦‚æœé‡åˆ°é—®é¢˜ï¼Œè¯·æŸ¥çœ‹ [TROUBLESHOOTING.md](./TROUBLESHOOTING.md) æ–‡ä»¶ã€‚

### å¸¸è§é—®é¢˜

1. **WebSocket è¿æ¥å¤±è´¥** 
   - å¼€å‘ç¯å¢ƒï¼šæ£€æŸ¥ä»£ç†è®¾ç½®ï¼Œä½¿ç”¨ `127.0.0.1` è€Œä¸æ˜¯ `localhost`
   - å®¹å™¨åŒ–éƒ¨ç½²ï¼šç¡®è®¤Nginxæ­£ç¡®ä»£ç†WebSocketè¯·æ±‚

2. **API å¯†é’¥é”™è¯¯** 
   - ç¡®ä¿åœ¨ `.env` æ–‡ä»¶ä¸­è®¾ç½®äº†æœ‰æ•ˆçš„ `DASHSCOPE_API_KEY`

3. **OSSé…ç½®é”™è¯¯** 
   - ç¡®ä¿æ­£ç¡®é…ç½®äº† OSS å­˜å‚¨å‚æ•°

4. **ç«¯å£å†²çª** 
   - ç»Ÿä¸€æ¶æ„ï¼šæ£€æŸ¥ç«¯å£ 50001, 3000, 8123 æ˜¯å¦è¢«å ç”¨

5. **è§†é¢‘æ ¼å¼ä¸æ”¯æŒ** 
   - ç¡®ä¿ä¸Šä¼ çš„è§†é¢‘æ ¼å¼ä¸º MP4, MOV, AVI, MKV, WEBM

6. **è§†é¢‘æ— éŸ³é¢‘æµ**
   - ç³»ç»Ÿè¦æ±‚è§†é¢‘å¿…é¡»åŒ…å«éŸ³é¢‘æµï¼Œæ— éŸ³é¢‘çš„è§†é¢‘æ— æ³•å¤„ç†
   - å¦‚æœä¸Šä¼ æ— éŸ³é¢‘è§†é¢‘ï¼Œç³»ç»Ÿä¼šæ˜¾ç¤ºæ˜ç¡®çš„é”™è¯¯æç¤ºï¼š"è¯¥è§†é¢‘ä¸åŒ…å«éŸ³é¢‘ï¼Œä¸ç¬¦åˆä»»åŠ¡é¢„æœŸï¼Œæš‚æ—¶æ— æ³•å¤„ç†ã€‚"
   - è¯·ç¡®ä¿ä¸Šä¼ çš„è§†é¢‘åŒ…å«éŸ³é¢‘è½¨é“

7. **Nginxç›¸å…³é—®é¢˜**
   ```bash
   # æ£€æŸ¥Nginxé…ç½®
   nginx -t
   
   # æŸ¥çœ‹Nginxæ—¥å¿—
   tail -f /var/log/nginx/error.log
   tail -f /var/log/nginx/access.log
   
   # é‡å¯Nginx
   nginx -s reload
   
   # å®Œå…¨é‡å¯Nginxï¼ˆåº”ç”¨æ–°é…ç½®ï¼‰
   nginx -s stop
   nginx
   ```

8. **ç»Ÿä¸€æ¶æ„éƒ¨ç½²é—®é¢˜**
   - ç¡®è®¤å®¹å™¨å†…æ‰€æœ‰æœåŠ¡éƒ½åœ¨è¿è¡Œï¼ˆNginxã€å‰ç«¯ã€åç«¯ï¼‰
   - æ£€æŸ¥Nginxæ˜¯å¦æ­£ç¡®ä»£ç†è¯·æ±‚
   - ç¡®è®¤ç¯å¢ƒå˜é‡æŒ‡å‘æ­£ç¡®çš„ç«¯å£ï¼ˆ50001ï¼‰
   - æ£€æŸ¥ç»å°”å¹³å°çš„ä»£ç†è®¾ç½®

9. **æœåŠ¡æ— æ³•åœæ­¢** - ä½¿ç”¨ `./stop_services.sh` å¼ºåˆ¶åœæ­¢æ‰€æœ‰ç›¸å…³è¿›ç¨‹

10. **å®¹å™¨åŒ–éƒ¨ç½²å¤±è´¥** - ä½¿ç”¨ `./start_services_persistent.sh` å¯åŠ¨ï¼Œç¡®ä¿åç«¯æœåŠ¡ä½œä¸ºä¸»è¿›ç¨‹è¿è¡Œ

11. **ç”Ÿäº§æ„å»ºå¤±è´¥** - æ£€æŸ¥TypeScripté”™è¯¯ï¼Œæˆ–è„šæœ¬ä¼šè‡ªåŠ¨å›é€€åˆ°å¼€å‘æ¨¡å¼

12. **å¼€å‘è¾…åŠ©æŒ‰é’®æ¶ˆå¤±** - è¿™æ˜¯æ­£å¸¸çš„ï¼Œç”Ÿäº§ç¯å¢ƒå¯åŠ¨ä½¿ç”¨ç”Ÿäº§æ¨¡å¼æ—¶ä¼šéšè—å¼€å‘å·¥å…·

13. **å¤šæ ‡ç­¾é¡µæ€§èƒ½æ…¢** - å·²ä¼˜åŒ–ä¸ºå¹¶å‘å¤„ç†ï¼Œå¤šæ ‡ç­¾é¡µå¯åŒæ—¶å¤„ç†è¯·æ±‚

14. **ä¼šè¯è¶…æ—¶** - ä¼šè¯1å°æ—¶æ— æ´»åŠ¨ä¼šè‡ªåŠ¨æ¸…ç†ï¼Œé‡æ–°æ“ä½œå³å¯

15. **ç»å°”å¹³å°éƒ¨ç½²å¤±è´¥** - ç¡®ä¿ä½¿ç”¨æ­£ç¡®çš„å¯åŠ¨å‘½ä»¤ï¼š`cd /root/video2sop && ./start_services_persistent.sh`

16. **å®¹å™¨é€€å‡º** - æ£€æŸ¥åç«¯æœåŠ¡æ˜¯å¦æ­£å¸¸å¯åŠ¨ï¼ŒæŸ¥çœ‹ `/root/video2sop/logs/backend.log` æ—¥å¿—

17. **å‰ç«¯è¿æ¥ä¸åˆ°åç«¯** - æ£€æŸ¥ç¯å¢ƒå˜é‡é…ç½®ï¼Œç¡®ä¿ `NEXT_PUBLIC_API_URL` å’Œ `NEXT_PUBLIC_WS_URL` æ­£ç¡®è®¾ç½®ä¸º50001ç«¯å£

18. **ç¯å¢ƒé…ç½®ä¸ç”Ÿæ•ˆ** - å¯åŠ¨è„šæœ¬ä¼šè¦†ç›– `.env.local` æ–‡ä»¶ï¼›å¦‚æœæ‰‹åŠ¨ä¿®æ”¹äº†é…ç½®ï¼Œéœ€è¦é€‰æ‹©ï¼šä½¿ç”¨å¯åŠ¨è„šæœ¬ï¼ˆè¦†ç›–ä¿®æ”¹ï¼‰æˆ–ç›´æ¥è¿è¡Œnpmï¼ˆä¿ç•™ä¿®æ”¹ï¼‰

19. **ç»Ÿä¸€æ¶æ„APIè¿æ¥å¤±è´¥** - ä½¿ç”¨Nginxåå‘ä»£ç†åï¼Œæ‰€æœ‰è¯·æ±‚éƒ½é€šè¿‡50001ç«¯å£ï¼Œæ— éœ€ä¿®æ”¹APIåœ°å€

20. **è§†é¢‘ç†è§£è¶…æ—¶é—®é¢˜** - Nginxä»£ç†è¶…æ—¶å·²ä¼˜åŒ–ä¸º30åˆ†é’Ÿï¼Œæ”¯æŒé•¿æ—¶é—´AIå¤„ç†ï¼›å¯é€šè¿‡ç¯å¢ƒå˜é‡è°ƒæ•´å„åŠŸèƒ½è¶…æ—¶æ—¶é—´

21. **APIè¯·æ±‚è¶…æ—¶** - å¦‚æœé‡åˆ°"upstream timed out"é”™è¯¯ï¼Œæ£€æŸ¥Nginxé…ç½®ä¸­çš„proxy_read_timeoutè®¾ç½®

22. **ç»å°”å¹³å°WebSocketè¿æ¥å¤±è´¥** - ä½¿ç”¨Nginxåå‘ä»£ç†è§£å†³ï¼Œç¡®ä¿WebSocketé€šè¿‡50001ç«¯å£è®¿é—®

23. **å®¹å™¨éƒ¨ç½²åæ— æ³•è®¿é—®** - è¿è¡Œ `./check_deployment_status.sh` æ£€æŸ¥æœåŠ¡çŠ¶æ€ï¼Œç¡®ä¿æ‰€æœ‰æœåŠ¡æ­£å¸¸è¿è¡Œ

24. **ç»å°”å¹³å°ä»£ç†æ‹¦æˆª** - æ‰€æœ‰è¯·æ±‚é€šè¿‡Nginxåœ¨50001ç«¯å£ç»Ÿä¸€å¤„ç†ï¼Œé¿å…ç›´æ¥è®¿é—®å†…éƒ¨ç«¯å£

25. **WebSocketé…ç½®ä¼˜åŒ–** - v1.5.1å·²æ·»åŠ ç»å°”å®˜æ–¹å»ºè®®çš„proxy_cache_bypass $http_upgradeé…ç½®ï¼Œå¦‚ä»æœ‰é—®é¢˜è¯·è¿è¡Œtest_websocket_config.shè¯Šæ–­

26. **éƒ¨ç½²åçŠ¶æ€æ£€æŸ¥** - ä½¿ç”¨./check_deployment_status.shè„šæœ¬å…¨é¢æ£€æŸ¥æœåŠ¡çŠ¶æ€ï¼ŒåŒ…æ‹¬è¿›ç¨‹ã€ç«¯å£ã€å¥åº·æ£€æŸ¥ç­‰

27. **ä¸‹è½½å‹ç¼©è§†é¢‘åä¼šè¯æ–‡ä»¶è¢«åˆ é™¤** - v1.7.0å·²ä¿®å¤ï¼šæ”¹ç”¨å‰ç«¯ Blob ä¸‹è½½æ–¹å¼ï¼Œé¿å…é¡µé¢å¯¼èˆªäº‹ä»¶è§¦å‘æ„å¤–çš„ä¼šè¯æ¸…ç†ã€‚å¦‚æœé‡åˆ°æ­¤é—®é¢˜ï¼Œè¯·å‡çº§åˆ°v1.7.0æˆ–æ›´æ–°ç‰ˆæœ¬

28. **è§†é¢‘ä¸Šä¼ è¿”å›500é”™è¯¯** - v1.8.1å·²ä¿®å¤ï¼šå¦‚æœè§†é¢‘ä¸åŒ…å«éŸ³é¢‘æµï¼Œç³»ç»Ÿä¼šè¿”å›æ˜ç¡®çš„400é”™è¯¯æç¤ºï¼Œè€Œä¸æ˜¯500é”™è¯¯ã€‚è¯·ç¡®ä¿ä¸Šä¼ çš„è§†é¢‘åŒ…å«éŸ³é¢‘è½¨é“

## ğŸ§ª æµ‹è¯•

### æµ‹è¯• WebSocket è¿æ¥
```bash
cd /root/video2sop/langgraph-agent
python -c "
import asyncio
import websockets
import json

async def test_ws():
    uri = 'ws://127.0.0.1:50001/ws'
    async with websockets.connect(uri) as websocket:
        print('WebSocket è¿æ¥æˆåŠŸ')
        # ç›‘å¬æ¶ˆæ¯
        while True:
            try:
                message = await websocket.recv()
                data = json.loads(message)
                print('æ”¶åˆ°æ¶ˆæ¯:', data)
            except websockets.exceptions.ConnectionClosed:
                print('è¿æ¥å·²å…³é—­')
                break

asyncio.run(test_ws())
"
```

### æµ‹è¯• HTTP å¥åº·æ£€æŸ¥
```bash
# ç»Ÿä¸€æ¶æ„ï¼ˆå¼€å‘å’Œç”Ÿäº§ç¯å¢ƒï¼‰
curl --noproxy '*' http://127.0.0.1:50001/api/health
```

### æµ‹è¯•ä¼šè¯ç»Ÿè®¡
```bash
# ç»Ÿä¸€æ¶æ„ï¼ˆå¼€å‘å’Œç”Ÿäº§ç¯å¢ƒï¼‰
curl --noproxy '*' http://127.0.0.1:50001/api/sessions/stats
```

### å®Œæ•´è¿æ¥æµ‹è¯•
```bash
cd /root/video2sop
python tests/test_connection.py
```

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®ä»…ä¾›å­¦ä¹ å’Œç ”ç©¶ä½¿ç”¨ã€‚

## ğŸ¤ è´¡çŒ®

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼

## å›½é™…åŒ–ï¼ˆi18nï¼‰çŠ¶æ€æ¶ˆæ¯æœ¬åœ°åŒ–

æœ¬é¡¹ç›®å‰ç«¯æ”¯æŒä¸­/è‹±æ–‡åˆ‡æ¢ã€‚å¯¹äºåç«¯é€šè¿‡ WebSocket æ¨é€çš„ä¸­æ–‡ `status` æ¶ˆæ¯ï¼Œé‡‡ç”¨â€œä¸¤æ­¥èµ°â€ï¼š

- çŸ­æœŸï¼ˆå·²å®ç°ï¼Œå‰ç«¯å…œåº•ï¼‰
  - ä½ç½®ï¼š`chat-frontend/src/utils/statusMap.ts`
  - ç­–ç•¥ï¼š
    1) ä¼˜å…ˆç”¨ `stage â†’ i18n key` æ˜ å°„ï¼ˆå¦‚ `parse_start`ã€`parse_done`ï¼‰ã€‚
    2) æ—  `stage` æˆ–æœªçŸ¥ `stage` æ—¶ï¼Œå¯¹ä¸­æ–‡åŸæ–‡åšæ­£åˆ™åŒ¹é…ï¼Œæå–å‚æ•°å¹¶æ˜ å°„åˆ° i18n keyï¼›æœªå‘½ä¸­å›é€€åŸæ–‡ã€‚
  - å·²è¦†ç›–ç¤ºä¾‹ï¼š
    - æ£€æµ‹åˆ°å·²å‹ç¼©è§†é¢‘ï¼Œè·³è¿‡å‹ç¼© â†’ `status.compressed_skipped`
    - è§†é¢‘æ— éœ€å‹ç¼©ï¼Œå·²å‡†å¤‡å°±ç»ª â†’ `status.no_compression_needed`
    - çŸ­è§†é¢‘ç†è§£å®Œæˆ â†’ `status.short_understanding_done`
    - SOPè§£æå®Œæˆï¼Œå…±ç”Ÿæˆ N ä¸ªåŒºå— â†’ `status.parse_done_with_count`ï¼ˆå‚æ•°ï¼š`count`ï¼‰
    - è§†é¢‘æ—¶é•¿ Xåˆ†Yç§’ï¼Œä¸åˆ†æ®µ/åˆ†æ®µ â†’ `status.video_length_no_segment` / `status.video_length_segmented`ï¼ˆå‚æ•°ï¼š`minutes`,`seconds`ï¼‰
    - å¼€å§‹ä¸Šä¼ å‹ç¼©è§†é¢‘ â†’ `status.upload_start`
    - å‹ç¼©è§†é¢‘ä¸Šä¼ å®Œæˆ â†’ `status.upload_compressed_done`

- é•¿æœŸï¼ˆæ¨èï¼Œåç«¯ç»“æ„åŒ–ï¼‰
  - åç«¯ç»Ÿä¸€å‘é€ï¼š`{ type: 'status', code: 'parse_done', params: { count: 20 } }`
  - å‰ç«¯åŸºäº `code + params` æœ¬åœ°åŒ–æ¸²æŸ“ï¼Œä¸ä¾èµ–ä¸­æ–‡ `message`ã€‚
  - è¿‡æ¸¡æœŸå¯åŒæ—¶å‘é€ `code+params+message`ï¼Œå‰ç«¯ä¼˜å…ˆ `code+params`ã€‚

> æ‰©å±•ï¼šæ–°å¢æˆ–è°ƒæ•´è§„åˆ™æ—¶ï¼Œåœ¨ `statusMap.ts` æ·»åŠ /ä¿®æ”¹æ­£åˆ™ï¼Œå¹¶åœ¨ `src/i18n/en.ts`ã€`src/i18n/zh.ts` å¢è¡¥å¯¹åº” `status.*` å­—å…¸é”®ã€‚