<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>紧凑区块布局测试</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; background: #f5f5f5; }
        .container { max-width: 1200px; margin: 0 auto; }
        .section { margin: 20px 0; padding: 20px; border: 1px solid #ddd; border-radius: 8px; background: white; }
        .success { border-left: 4px solid #28a745; background: #d4edda; }
        .info { border-left: 4px solid #17a2b8; background: #d1ecf1; }
        .demo-title { font-size: 18px; font-weight: bold; margin-bottom: 15px; }
        
        /* 模拟新的紧凑布局 */
        .compact-block {
            border: 1px solid #e5e7eb;
            border-radius: 8px;
            margin: 10px 0;
            background: white;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        }
        
        .compact-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            padding: 12px;
            border-bottom: 1px solid #f3f4f6;
        }
        
        .compact-left {
            flex: 1;
            min-width: 0;
            margin-right: 12px;
        }
        
        .compact-meta {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-bottom: 4px;
        }
        
        .compact-preview {
            font-size: 14px;
            color: #374151;
            line-height: 1.4;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
            text-overflow: ellipsis;
        }
        
        .compact-right {
            display: flex;
            flex-direction: column;
            align-items: flex-end;
            gap: 8px;
        }
        
        .compact-time {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 12px;
        }
        
        .time-badge {
            padding: 2px 6px;
            border-radius: 4px;
            font-size: 11px;
        }
        
        .time-badge.blue { background: #dbeafe; color: #1e40af; }
        .time-badge.green { background: #dcfce7; color: #166534; }
        
        .compact-actions {
            display: flex;
            align-items: center;
            gap: 4px;
        }
        
        .action-btn {
            padding: 4px;
            border-radius: 4px;
            cursor: pointer;
            transition: background-color 0.2s;
            font-size: 14px;
        }
        
        .action-btn:hover { background: rgba(0,0,0,0.05); }
        .action-btn.play { color: #059669; }
        .action-btn.edit { color: #2563eb; }
        .action-btn.delete { color: #dc2626; }
        
        .compact-edit {
            padding: 12px;
            background: #f9fafb;
            border-top: 1px solid #f3f4f6;
        }
        
        .edit-grid {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
            gap: 12px;
            margin-top: 12px;
        }
        
        .edit-field {
            display: flex;
            flex-direction: column;
        }
        
        .edit-label {
            font-size: 12px;
            font-weight: 500;
            color: #6b7280;
            margin-bottom: 4px;
        }
        
        .edit-input {
            padding: 8px;
            border: 1px solid #d1d5db;
            border-radius: 4px;
            font-size: 14px;
        }
        
        .edit-toggle {
            display: flex;
            align-items: center;
            justify-content: center;
            height: 32px;
            border: 1px solid #d1d5db;
            border-radius: 4px;
            cursor: pointer;
            transition: background-color 0.2s;
        }
        
        .edit-toggle:hover { background: #f3f4f6; }
        
        .toggle-badge {
            font-size: 11px;
            padding: 2px 6px;
            border-radius: 4px;
            transition: all 0.2s;
        }
        
        .toggle-badge.enabled { background: #dcfce7; color: #166534; }
        .toggle-badge.disabled { background: #f3f4f6; color: #6b7280; }
        
        .layout-comparison {
            display: flex;
            gap: 20px;
            margin: 20px 0;
        }
        
        .layout-demo {
            flex: 1;
            border: 2px solid #ddd;
            border-radius: 8px;
            padding: 15px;
        }
        
        .layout-demo.before { border-color: #dc3545; background: #fff5f5; }
        .layout-demo.after { border-color: #28a745; background: #f8fff8; }
        
        .old-block {
            border: 1px solid #e5e7eb;
            border-radius: 8px;
            padding: 16px;
            margin: 10px 0;
            background: white;
        }
        
        .old-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 12px;
        }
        
        .old-content {
            margin-bottom: 12px;
        }
        
        .old-time-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 12px;
            margin-bottom: 12px;
        }
        
        .old-setting {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>📦 SOP区块紧凑布局优化</h1>
        
        <div class="section success">
            <h2>✅ 优化内容</h2>
            <ul>
                <li><strong>紧凑设计</strong>：将区块高度减少约50%，更好地利用屏幕空间</li>
                <li><strong>内容预览</strong>：在非编辑模式下显示内容预览，最多2行</li>
                <li><strong>信息层次</strong>：重要信息（类型、时间、操作）一目了然</li>
                <li><strong>编辑优化</strong>：编辑模式使用3列布局，更紧凑</li>
                <li><strong>视觉改进</strong>：使用图标按钮，减少文字占用空间</li>
            </ul>
        </div>
        
        <div class="section">
            <h2>🔄 布局对比</h2>
            <div class="layout-comparison">
                <div class="layout-demo before">
                    <h3>修复前 - 传统布局</h3>
                    <div class="old-block">
                        <div class="old-header">
                            <div>
                                <span style="font-size: 16px;">📝</span>
                                <span style="margin-left: 8px; font-weight: 500;">步骤</span>
                                <span style="margin-left: 8px; font-size: 12px; color: #666;">#block_123</span>
                            </div>
                            <div style="display: flex; gap: 8px;">
                                <button style="padding: 4px 8px; background: #dcfce7; color: #166534; border-radius: 4px; font-size: 12px;">▶️ 播放 0:05</button>
                                <button style="padding: 4px 8px; background: #dbeafe; color: #1e40af; border-radius: 4px; font-size: 12px;">编辑</button>
                                <button style="padding: 4px 8px; background: #fecaca; color: #dc2626; border-radius: 4px; font-size: 12px;">删除</button>
                            </div>
                        </div>
                        <div class="old-content">
                            <label style="font-size: 12px; color: #666; margin-bottom: 4px; display: block;">内容</label>
                            <div style="padding: 8px; background: white; border: 1px solid #d1d5db; border-radius: 4px; font-size: 14px;">
                                1. 将模具底座与模具套通过螺纹或卡扣方式组装牢固。确保连接紧密，无松动现象。
                            </div>
                        </div>
                        <div class="old-time-grid">
                            <div>
                                <label style="font-size: 12px; color: #666; margin-bottom: 4px; display: block;">开始时间 (秒)</label>
                                <div style="padding: 8px; background: white; border: 1px solid #d1d5db; border-radius: 4px; font-size: 14px;">0:05</div>
                            </div>
                            <div>
                                <label style="font-size: 12px; color: #666; margin-bottom: 4px; display: block;">结束时间 (秒)</label>
                                <div style="padding: 8px; background: white; border: 1px solid #d1d5db; border-radius: 4px; font-size: 14px;">0:08</div>
                            </div>
                        </div>
                        <div class="old-setting">
                            <label style="font-size: 12px; color: #666;">显示播放按钮</label>
                            <span style="font-size: 12px; padding: 2px 6px; background: #dcfce7; color: #166534; border-radius: 4px;">已启用</span>
                        </div>
                    </div>
                    <p><strong>问题：</strong></p>
                    <ul style="font-size: 14px;">
                        <li>占用垂直空间过多</li>
                        <li>信息分散，需要滚动查看</li>
                        <li>操作按钮占用空间大</li>
                        <li>编辑时布局变化突兀</li>
                    </ul>
                </div>
                
                <div class="layout-demo after">
                    <h3>修复后 - 紧凑布局</h3>
                    <div class="compact-block">
                        <div class="compact-header">
                            <div class="compact-left">
                                <div class="compact-meta">
                                    <span style="font-size: 14px;">📝</span>
                                    <span style="font-size: 12px; font-weight: 500; color: #374151;">步骤</span>
                                    <span style="font-size: 12px; color: #9ca3af;">#block_123</span>
                                </div>
                                <div class="compact-preview">
                                    1. 将模具底座与模具套通过螺纹或卡扣方式组装牢固。确保连接紧密，无松动现象。
                                </div>
                            </div>
                            <div class="compact-right">
                                <div class="compact-time">
                                    <span class="time-badge blue">0:05 - 0:08</span>
                                    <span class="time-badge green">播放</span>
                                </div>
                                <div class="compact-actions">
                                    <span class="action-btn play">▶️</span>
                                    <span class="action-btn edit">✏️</span>
                                    <span class="action-btn delete">🗑️</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- 编辑模式示例 -->
                    <div class="compact-block">
                        <div class="compact-header">
                            <div class="compact-left">
                                <div class="compact-meta">
                                    <span style="font-size: 14px;">📝</span>
                                    <span style="font-size: 12px; font-weight: 500; color: #374151;">步骤</span>
                                    <span style="font-size: 12px; color: #9ca3af;">#block_456</span>
                                </div>
                                <div class="compact-preview">
                                    2. 检查模具表面是否有划痕或污渍，确保清洁度符合要求。
                                </div>
                            </div>
                            <div class="compact-right">
                                <div class="compact-time">
                                    <span class="time-badge blue">0:08 - 0:12</span>
                                    <span class="time-badge green">播放</span>
                                </div>
                                <div class="compact-actions">
                                    <span class="action-btn play">▶️</span>
                                    <span class="action-btn edit">✓</span>
                                    <span class="action-btn delete">🗑️</span>
                                </div>
                            </div>
                        </div>
                        <div class="compact-edit">
                            <div class="edit-field">
                                <label class="edit-label">内容</label>
                                <textarea class="edit-input" rows="2" placeholder="输入区块内容..."></textarea>
                            </div>
                            <div class="edit-grid">
                                <div class="edit-field">
                                    <label class="edit-label">开始时间</label>
                                    <input type="number" class="edit-input" placeholder="0" value="8">
                                </div>
                                <div class="edit-field">
                                    <label class="edit-label">结束时间</label>
                                    <input type="number" class="edit-input" placeholder="0" value="12">
                                </div>
                                <div class="edit-field">
                                    <label class="edit-label">显示播放按钮</label>
                                    <div class="edit-toggle">
                                        <span class="toggle-badge enabled">启用</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <p><strong>优势：</strong></p>
                    <ul style="font-size: 14px;">
                        <li>紧凑设计，节省50%垂直空间</li>
                        <li>内容预览，快速了解区块内容</li>
                        <li>图标按钮，操作更直观</li>
                        <li>3列编辑布局，信息更集中</li>
                    </ul>
                </div>
            </div>
        </div>
        
        <div class="section">
            <h2>📏 空间利用对比</h2>
            <div style="display: flex; gap: 20px; margin: 20px 0;">
                <div style="flex: 1;">
                    <h4>修复前</h4>
                    <div style="background: #fef2f2; border: 2px solid #fca5a5; border-radius: 8px; padding: 15px; margin: 10px 0;">
                        <div style="height: 200px; background: #fee2e2; border-radius: 4px; display: flex; align-items: center; justify-content: center; color: #991b1b; font-weight: bold;">
                            5个区块 ≈ 1000px高度
                        </div>
                    </div>
                    <ul style="font-size: 14px;">
                        <li>每个区块约200px高度</li>
                        <li>大量空白和边框</li>
                        <li>信息密度低</li>
                    </ul>
                </div>
                <div style="flex: 1;">
                    <h4>修复后</h4>
                    <div style="background: #f0fdf4; border: 2px solid #86efac; border-radius: 8px; padding: 15px; margin: 10px 0;">
                        <div style="height: 100px; background: #dcfce7; border-radius: 4px; display: flex; align-items: center; justify-content: center; color: #166534; font-weight: bold;">
                            5个区块 ≈ 500px高度
                        </div>
                    </div>
                    <ul style="font-size: 14px;">
                        <li>每个区块约100px高度</li>
                        <li>紧凑布局，无浪费</li>
                        <li>信息密度高</li>
                    </ul>
                </div>
            </div>
        </div>
        
        <div class="section info">
            <h2>🎯 设计特点</h2>
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px;">
                <div style="background: #f8f9fa; padding: 15px; border-radius: 8px;">
                    <h4>📱 响应式设计</h4>
                    <ul style="font-size: 14px;">
                        <li>自适应不同屏幕宽度</li>
                        <li>移动端友好的紧凑布局</li>
                        <li>触摸友好的按钮尺寸</li>
                    </ul>
                </div>
                <div style="background: #f8f9fa; padding: 15px; border-radius: 8px;">
                    <h4>⚡ 交互优化</h4>
                    <ul style="font-size: 14px;">
                        <li>悬停效果和过渡动画</li>
                        <li>直观的图标按钮</li>
                        <li>清晰的状态反馈</li>
                    </ul>
                </div>
                <div style="background: #f8f9fa; padding: 15px; border-radius: 8px;">
                    <h4>🎨 视觉层次</h4>
                    <ul style="font-size: 14px;">
                        <li>颜色编码的区块类型</li>
                        <li>时间标签和状态徽章</li>
                        <li>清晰的信息分组</li>
                    </ul>
                </div>
                <div style="background: #f8f9fa; padding: 15px; border-radius: 8px;">
                    <h4>🔧 功能完整</h4>
                    <ul style="font-size: 14px;">
                        <li>保持所有原有功能</li>
                        <li>编辑模式优化</li>
                        <li>选择和操作支持</li>
                    </ul>
                </div>
            </div>
        </div>
        
        <div class="section success">
            <h2>🧪 测试方法</h2>
            <ol>
                <li>访问主应用：<code>http://localhost:50001</code></li>
                <li>进入SOP编辑器，观察新的紧凑布局</li>
                <li>测试区块的编辑功能</li>
                <li>验证内容预览的文本截断</li>
                <li>检查图标按钮的交互效果</li>
                <li>在不同屏幕尺寸下测试响应式效果</li>
                <li>对比编辑前后的空间利用率</li>
            </ol>
        </div>
    </div>
</body>
</html>





